/*! For license information please see 18.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[18],{72119:(e,t,s)=>{s.d(t,{E0:()=>n,Hn:()=>h,NZ:()=>o,Oq:()=>d,Ql:()=>g,X7:()=>c,ox:()=>r,xh:()=>l,yV:()=>a});var i=s(83402);const a=.01,o=.001,n=!0,r={highResThreshold:1081,desktopSize:192,desktopSizeHighRes:320,mobileSize:128},c={smoothness:.4,perspective:{fov:40,thresholdClose:1,thresholdFar:8,offsetClose:.25,offsetFar:.5,scale:1},ortho:{fov:5,thresholdClose:5,thresholdFar:20,offsetClose:15,offsetFar:30,scale:4}},l={desktop:i.l1.Edges,floorplan:i.l1.Axes,mobile:i.l1.Edges,alt:i.l1.Free,shift:i.l1.PlanarAxes,shiftAlt:i.l1.EdgesAndPlanarAxes,disabled:i.l1.Free},d={mobile:.15,desktop:.1},h={SCALE:.1,SCALE_NDC:.5,SCALE_ASPECT:.035,SCALE_DISTANCE:.025},g="measurements"},56163:(e,t,s)=>{s.d(t,{K:()=>r});var i=s(52528),a=s(71166),o=s(63319);const n=new i.v({});class r{constructor(e,t,s){this.commandBinder=e,this.layersData=t,this.dataTypeGroup=s,this.textParser=n,this.enabled=!0,this.bindings=[]}getGroupingId(e){switch(e){case o.HH.TYPE:return this.getTypeId();case o.HH.FLOOR:return this.getFloorId();case o.HH.ROOM:return this.getRoomId();case o.HH.LAYER:return this.getLayerGroupId();case o.HH.DATE:return this.dateBucket}}getFloorId(){return this.floorId}getRoomId(){return this.roomId}getDateBucket(){return this.dateBucket}getTypeId(){return this.typeId}supportsBatchDelete(){return!1}supportsLayeredCopyMove(){return!1}getLayerGroupId(){var e,t;const s=null===(e=this.layersData)||void 0===e?void 0:e.getBaseLayerId(),i=null===(t=this.layersData)||void 0===t?void 0:t.getViewLayerId();return this.layerId&&i&&this.layerId===s?i:this.layerId}isLayerVisible(){return!this.layersData||!this.layerId||this.layersData.layerVisible(this.layerId)}onSelect(e,t,s){this.commandBinder.issueCommand(new a.IL(this.id,this.typeId))}registerBindings(){}cancelBindings(){this.bindings.forEach((e=>e.cancel()))}}},83402:(e,t,s)=>{s.d(t,{l1:()=>n,r2:()=>l});var i=s(81396),a=s(69505),o=s(90304);var n;!function(e){e[e.Axes=1]="Axes",e[e.PlanarAxes=2]="PlanarAxes",e[e.EdgesAndPlanarAxes=3]="EdgesAndPlanarAxes",e[e.Edges=4]="Edges",e[e.Free=5]="Free",e[e.Locked=6]="Locked"}(n||(n={}));const r={[o.eD.UP]:{dir:Object.freeze(o.fU.UP.clone())},[o.eD.DOWN]:{dir:Object.freeze(o.fU.DOWN.clone())},[o.eD.BACK]:{dir:Object.freeze(o.fU.BACK.clone())},[o.eD.LEFT]:{dir:Object.freeze(o.fU.LEFT.clone())},[o.eD.RIGHT]:{dir:Object.freeze(o.fU.RIGHT.clone())},[o.eD.FORWARD]:{dir:Object.freeze(o.fU.FORWARD.clone())}},c={[o.eD.HORIZONTAL_PLANE]:{dir:Object.freeze(o.fU.HORIZONTAL_PLANE.clone())}},l=(()=>{let e=0;const t=new i.Vector3,s=new i.Vector3,l=new i.Vector3,d=new i.Vector3,h=999,g=Object.freeze(o.fU.ZERO.clone()),u=Object.keys(r).map((e=>Object.assign(Object.assign({},r[e]),{name:e,angleTo:h}))),b=Object.keys(c).map((e=>Object.assign(Object.assign({},c[e]),{name:e,angleTo:h}))),f=e=>(e+3)%2;let p=u[0];return(i,r,c=n.Axes)=>{if(c===n.Free)return{position:r.clone(),constrainedAxis:g,axisName:o.eD.NONE};if(u.forEach((e=>e.angleTo=h)),b.forEach((e=>e.angleTo=h)),l.copy(r).sub(i),e=l.length(),e<.05)return{position:r.clone(),constrainedAxis:g,axisName:o.eD.NONE};d.copy(l).normalize();const y=.05*Math.min(e,1);if(c!==n.Locked){for(const e of u){const t=(0,a.ZY)(d.angleTo(e.dir));t<p.angleTo&&(p=e),e.angleTo=t}if(p.angleTo>20){const e=Math.abs(l.y);e*e<y&&(p=b[0])}}t.set(i.x*f(p.dir.x),i.y*f(p.dir.y),i.z*f(p.dir.z)),s.set(r.x*Math.abs(p.dir.x),r.y*Math.abs(p.dir.y),r.z*Math.abs(p.dir.z)).add(t);return c===n.Locked||s.distanceToSquared(r)<y?{position:s.clone(),constrainedAxis:p.dir,axisName:p.name}:{position:r.clone(),constrainedAxis:g,axisName:o.eD.NONE}}})()},67971:(e,t,s)=>{s.d(t,{$7:()=>d,uc:()=>g,N3:()=>l});var i=s(81396),a=s(4679),o=s(59370),n=s(69505),r=s(49827),c=s(73121);var l;(0,a.Dy)({unicodeFontsURL:"https://static.matterport.com/webgl-vendors/unicode-font-resolver/1.0.1/"}),function(e){e.WORLD="world",e.NDC="ndc"}(l||(l={}));class d extends i.Object3D{constructor(e,t=l.WORLD){var s,o,n,r;super(),this.config=e,this.scaleType=t,this.unscaledWidth=0,this.unscaledHeight=0,this.labelTextMaterial=new i.MeshBasicMaterial,this.bindings=[];const c=this.config.background||this.config.backgroundAsCollider;if(c){this.config.backgroundOpacity=void 0!==this.config.backgroundOpacity?this.config.backgroundOpacity:1,this.config.backgroundOpacity=this.config.background?this.config.backgroundOpacity:0;const t=new i.BoxGeometry(1,1,.01),s=new i.MeshBasicMaterial({color:e.backgroundColor,transparent:!0,depthTest:this.config.backgroundOpacity>0&&!e.disableDepth,depthWrite:this.config.backgroundOpacity>0&&!e.disableDepth,opacity:this.config.backgroundOpacity,stencilRef:1,stencilFail:i.KeepStencilOp,stencilZFail:i.KeepStencilOp,stencilZPass:i.ReplaceStencilOp,stencilFunc:i.AlwaysStencilFunc,stencilWrite:!0});this.labelBackgroundMesh=new this.config.backgroundColliderType(t,s),this.labelBackgroundMesh.position.z=-.01,this.labelBackgroundMesh.name="Label Background",this.collider=this.labelBackgroundMesh,this.add(this.labelBackgroundMesh)}const d=this.labelTextMesh=new a.xv;d.material=this.labelTextMaterial,d.name="Label Text",d.text=e.text||"",d.renderOrder=10,d.font=`${null!==(s=e.assetBasePath)&&void 0!==s?s:""}${e.fontPath}`,d.lang=e.lang,d.fontSize=1,d.fontWeight=700,d.anchorX="50%",d.anchorY="50%",d.outlineWidth=e.outline?e.outlineWidth:0,d.maxWidth=e.wordWrapWidth,d.textAlign=e.align,c&&(d.raycast=()=>{}),d.addEventListener("synccomplete",(()=>{var e;const[t,s,i,a]=d.textRenderInfo.visibleBounds;let o=i-t,n=a-s;c&&(o+=this.config.backgroundBorderWidth,n+=this.config.backgroundBorderHeight,this.labelBackgroundMesh.scale.set(o,n,1)),this.unscaledWidth=o,this.unscaledHeight=n,this.aspect=o/Math.max(n,.001),d.position.set((t+i)/-2,(s+a)/-2,0),null===(e=this._onGeomUpdate)||void 0===e||e.call(this)})),this.scaleFactor=null!==(o=e.scale)&&void 0!==o?o:1,this.opacity=null!==(n=e.opacity)&&void 0!==n?n:1,this.setColor(null!==(r=e.color)&&void 0!==r?r:0),this.add(d),d.sync(),this.name="Label Container"}dispose(){this.bindings.forEach((e=>e.cancel())),this.labelTextMesh.dispose()}onGeomUpdate(e){this._onGeomUpdate=e}get text(){return this.config.text}set text(e){this.config.text=e,this.labelTextMesh.text=e,this.labelTextMesh.sync()}get mesh(){return this.labelTextMesh}getUnscaledSize(){return{width:this.unscaledWidth,height:this.unscaledHeight}}get scaleFactor(){return this.config.scale}set scaleFactor(e){this.config.scale=e,this.scale.setScalar(e)}get opacity(){return void 0!==this.config.opacity?this.config.opacity:1}set opacity(e){if(e!==this.config.opacity){this.config.opacity=e;const t=e>0&&!this.config.disableDepth;if(this.config.background){const s=this.labelBackgroundMesh.material;s.opacity=Math.min(this.config.backgroundOpacity||1,e),s.depthWrite=e>.15,s.depthTest=t}const s=this.labelTextMaterial;s.opacity=e,s.depthTest=t,this.visible=e>0}}setColor(e){this.labelTextMaterial.color.set(e)}setRenderLayer(e){this.labelTextMesh.layers.mask=e.mask,this.labelBackgroundMesh&&(this.labelBackgroundMesh.layers.mask=e.mask)}setRenderOrder(e){this.renderOrder=e,this.labelTextMesh.renderOrder=e,this.labelBackgroundMesh&&(this.labelBackgroundMesh.renderOrder=e)}setPosition(e,t=(e=>e)){this.position.copy(t(e))}setOrientation(e,t=0){this.quaternion.copy(e),0!==t&&this.rotateZ(-t*n.Ue)}scaleBillboard(e,t,s,i,a,n,d=h.SCALE_DEFAULT){if(0!==s.elements[15])this.scaleFactor=.2*d*i*(h.ORTHO_IDEAL_HEIGHT/a);else{const g=(0,o.D_)(this.position,e,t,s.asThreeMatrix4()),u=Math.abs(g.x);if(u<1){const t=(0,c.mY)(s,e,this.position,a,d),o=((0,r.uZ)(n,1,2.5)+i)*h.SCALE_ASPECT,g=1+h.SCALE_NDC-u*h.SCALE_NDC-o,b=Math.max(Math.min(1/t*g,3),.001);this.scaleType===l.NDC?this.scaleFactor=b:this.scaleFactor=Math.min(b*h.NDC_MULT,d*h.SCALE_WORLD)}else this.scaleFactor=.001}}}const h={SCALE_DEFAULT:.1,SCALE_WORLD:4,SCALE_NDC:.5,SCALE_ASPECT:.035,DEPTH_WRITE_THRESHOD:.15,ORTHO_IDEAL_HEIGHT:1500,NDC_MULT:1.15};class g{constructor(e){this.currentTextConfig=g.defaultTextConfig,e?this.updateTextStyle(e):this.updateTextStyle(g.defaultTextConfig)}updateTextStyle(e){this.currentTextConfig=Object.assign(Object.assign({},this.currentTextConfig),e)}createLabel(e={text:""}){return new d(Object.assign(Object.assign({},this.currentTextConfig),e))}static makeConfig(e){return Object.assign(Object.assign({},g.defaultTextConfig),e)}}g.defaultTextConfig={text:"",fontPath:"fonts/roboto-700.woff",align:"center",wordWrapWidth:void 0,color:"black",backgroundColor:"white",backgroundBorderWidth:.9,backgroundBorderHeight:.7,background:!0,backgroundAsCollider:!0,backgroundColliderType:i.Mesh,scale:1,outline:!1,outlineWidth:.06}}}]);